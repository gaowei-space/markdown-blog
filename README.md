<img src="https://user-images.githubusercontent.com/10205742/204092260-007e94c8-f4de-4fdc-94cd-7e1c7f945a91.png">

[![GitHub Checks State](https://img.shields.io/github/checks-status/gaowei-space/meituan-pub-union/main)](https://github.com/gaowei-space/markdown-blog/tree/main)
[![GitHub Issues](https://img.shields.io/github/issues/gaowei-space/markdown-blog?color=yellow)](https://github.com/gaowei-space/markdown-blog/issues)
[![StyleCI](https://github.styleci.io/repos/494669204/shield?branch=main&style=flat)](https://github.styleci.io/repos/494669204?branch=main)
[![GitHub Latest Release](https://img.shields.io/github/v/release/gaowei-space/markdown-blog)](https://github.com/gaowei-space/markdown-blog/releases)
[![GitHub Last Commit](https://img.shields.io/github/last-commit/gaowei-space/markdown-blog?color=blueviolet)](https://github.com/gaowei-space/markdown-blog)
[![Go Report](https://goreportcard.com/badge/github.com/gaowei-space/markdown-blog)](https://goreportcard.com/report/github.com/gaowei-space/markdown-blog)
[![Docker Image Size](https://img.shields.io/docker/image-size/willgao/markdown-blog/latest?color=green)](https://hub.docker.com/repository/docker/willgao/markdown-blog)

[Markdown-Blog](https://github.com/gaowei-space/markdown-blog) æ˜¯ä¸€æ¬¾å°è€Œç¾çš„**Markdowné™æ€åšå®¢**ç¨‹åº

> å¦‚æœä½ å’Œæˆ‘ä¸€æ ·ï¼Œå¹³æ—¶å–œæ¬¢ä½¿ç”¨`markdown`æ–‡ä»¶æ¥è®°å½•è‡ªå·±çš„å·¥ä½œä¸ç”Ÿæ´»ä¸­çš„ç‚¹æ»´ï¼Œåˆå¸Œæœ›æŠŠè¿™äº›è®°å½•ç”Ÿæˆä¸ªäººåšå®¢ï¼Œé‚£[Markdown-Blog](https://github.com/gaowei-space/markdown-blog)å†é€‚åˆä¸è¿‡äº†ã€‚å®ƒç®€æ´ã€è½»å¿«ï¼Œéƒ¨ç½²ç®€å•ï¼Œå¯ä»¥æŠŠmarkdownæ–‡ä»¶å¿«é€Ÿå˜ä¸ºä¸ªäººåšå®¢ï¼Œå®ƒä¸éœ€è¦ç®¡ç†åå°ï¼Œæ— éœ€è¿›è¡Œæ–‡ç« çš„äºŒæ¬¡å‘å¸ƒã€‚

## æ¡ˆä¾‹
> [TechMan'Blog](https://blog.gaowei.tech)

### Webç«¯
Style | Preveiw
--------|------
Dark | <img max-width="600" alt="pc dark" src="https://user-images.githubusercontent.com/10205742/200173152-ca9fa52c-3590-4528-910a-ad42cb278f06.png">
Light | <img max-width="600" alt="pc white" src="https://user-images.githubusercontent.com/10205742/200173231-90f02b72-9e12-4a8b-8dd2-91e1ec4b4ff8.png">

### ç§»åŠ¨ç«¯
Dark    | Light
--------|------
<img max-width="400" alt="mobile dark" src="https://user-images.githubusercontent.com/10205742/201472561-7cd1222e-da0a-4d8c-be11-9f7e9d0851e0.png"> | <img max-width="400" alt="mobile white" src="https://user-images.githubusercontent.com/10205742/201472579-458b902a-dcae-4340-a305-3b54f1679aba.png">

## æ”¯æŒå¹³å°
> Windowsã€Linuxã€Mac OS

## æ›´æ–°
* `[v1.1.0]` 2022-11-26
  - æ”¯æŒè¯„è®º
  - å‚æ•°è®¾ç½®ï¼Œæ”¯æŒä»æœ¬åœ°æ–‡ä»¶è¯»å–ï¼ˆconfig.ymlï¼‰
  - æ”¯æŒåŠ è½½ favicon.ico
  - å…¶ä»–å·²çŸ¥é—®é¢˜ä¿®å¤

* `[v1.0.0]` 2022-11-20
  - æ”¯æŒ **Docker** éƒ¨ç½²
  - æ‰“åŒ…é™æ€æ–‡ä»¶ï¼Œä¼˜åŒ–ä¸ºå•ä¸€ç¨‹åºï¼Œä¸å†å¤–æŒ‚ web ç›®å½•
  - å…¶ä»–å·²çŸ¥é—®é¢˜ä¿®å¤

* `[v0.1.1]` 2022-11-12
  - æ–°å¢ç¬¬ä¸‰æ–¹åˆ†æç»Ÿè®¡é…ç½®ï¼ŒåŒ…æ‹¬ï¼šç™¾åº¦ã€è°·æ­Œ
  - æ”¯æŒé…ç½®é¡µé¢ç¼“å­˜æ—¶é—´
  - ç§»åŠ¨ç«¯æ ·å¼ä¼˜åŒ–
  - å…¶ä»–å·²çŸ¥é—®é¢˜ä¿®å¤

* `[v0.0.5]` 2022-11-06
  - æ”¯æŒ TOC è¯­æ³•ï¼Œå½“æ–‡ä»¶å†…å®¹é¦–è¡Œä½¿ç”¨ `[toc]` ä¼šè‡ªåŠ¨è§£æ
  - æ–°å¢æ˜äº®ğŸ”†ä¸»é¢˜ï¼Œæ”¯æŒæ˜æš—åˆ‡æ¢
  - å…¶ä»–å·²çŸ¥é—®é¢˜ä¿®å¤

## å®‰è£…
### äºŒè¿›åˆ¶
1. ä¸‹è½½ [release](https://github.com/gaowei-space/markdown-blog/releases/)

2. è§£å‹
```
tar zxf markdown-blog-v0.0.5-linux-amd64.tar.gz
```

3. åˆ›å»º markdown æ–‡ä»¶ç›®å½•
```
cd markdown-blog-linux-amd64
mkdir md
echo "### Hello World" > ./md/ä¸»é¡µ.md
```

4. è¿è¡Œ
```
./markdown-blog web
```

5. è®¿é—® http://127.0.0.1:5006ï¼ŒæŸ¥çœ‹æ•ˆæœ

### Docker
1. ä¸‹è½½
```
docker pull willgao/markdown-blog:latest
```

2. å¯åŠ¨
   - çº¿ä¸Šç¯å¢ƒ
    ```
    docker run -dit --rm --name=markdown-blog \
    -p 5006:5006 \
    -v $(pwd)/md:/md -v $(pwd)/cache:/cache \
    willgao/markdown-blog:latest
    ```

   - å¼€å‘ç¯å¢ƒ
    ```
    docker run -dit --rm --name=markdown-blog \
    -p 5006:5006 \
    -v $(pwd)/md:/md -v $(pwd)/cache:/cache \
    willgao/markdown-blog:latest \
    -e dev
    ```

3. è®¿é—® http://127.0.0.1:5006ï¼ŒæŸ¥çœ‹æ•ˆæœ

4. å…¶ä»–ç”¨æ³•
```
# æŸ¥çœ‹å¸®åŠ©
docker run -dit --rm --name=markdown-blog \
    -p 5006:5006 \
    -v $(pwd)/md:/md -v $(pwd)/cache:/cache \
    willgao/markdown-blog:latest -h


# è®¾ç½® title
docker run -dit --rm --name=markdown-blog \
    -p 5006:5006 \
    -v $(pwd)/md:/md -v $(pwd)/cache:/cache \
    willgao/markdown-blog:latest \
    -t "TechMan'Blog"


# è®¾ç½® è°·æ­Œç»Ÿè®¡
docker run -dit --rm --name=markdown-blog \
    -p 5006:5006 \
    -v $(pwd)/md:/md -v $(pwd)/cache:/cache \
    willgao/markdown-blog:latest \
    -t "TechMan'Blog" \
    --analyzer-google "De44AJSLDdda"
```

## ä½¿ç”¨

### å‘½ä»¤
- markdown-blog
    - -h æŸ¥çœ‹ç‰ˆæœ¬
    - web è¿è¡Œåšå®¢æœåŠ¡
- markdown-blog web
   - --config FILE                  åŠ è½½é…ç½®æ–‡ä»¶, é»˜è®¤ä¸ºç©º
   - --dir value, -d value          æŒ‡å®šmarkdownæ–‡ä»¶å¤¹ï¼Œé»˜è®¤ï¼š./md/
   - --title value, -t value        webæœåŠ¡æ ‡é¢˜ï¼Œé»˜è®¤ï¼š"Blog"
   - --port value, -p value         webæœåŠ¡ç«¯å£ï¼Œé»˜è®¤ï¼š5006
   - --env value, -e value          è¿è¡Œç¯å¢ƒ, å¯é€‰ï¼šdev,test,prodï¼Œé»˜è®¤ï¼š"prod"
   - --index value, -i value        è®¾ç½®é»˜è®¤é¦–é¡µçš„æ–‡ä»¶åç§°, é»˜è®¤ä¸ºç©º
   - --cache value, -c value        è®¾ç½®é¡µé¢ç¼“å­˜æ—¶é—´ï¼Œå•ä½åˆ†é’Ÿï¼Œé»˜è®¤3åˆ†é’Ÿ
   - --analyzer-baidu value         è®¾ç½®ç™¾åº¦åˆ†æç»Ÿè®¡å™¨
   - --analyzer-google value        è®¾ç½®è°·æ­Œåˆ†æç»Ÿè®¡å™¨
   - --gitalk.client-id value       è®¾ç½® Gitalk ClientId, é»˜è®¤ä¸ºç©º
   - --gitalk.client-secret value   è®¾ç½® Gitalk ClientSecret, é»˜è®¤ä¸ºç©º
   - --gitalk.repo value            è®¾ç½® Gitalk Repo, é»˜è®¤ä¸ºç©º
   - --gitalk.owner value           è®¾ç½® Gitalk Owner, é»˜è®¤ä¸ºç©º
   - --gitalk.admin                 è®¾ç½® Gitalk Admin, é»˜è®¤ä¸ºæ•°ç»„ [gitalk.owner]
   - --gitalk.labels                è®¾ç½® Gitalk Admin, é»˜è®¤ä¸ºæ•°ç»„ ["gitalk"]
   - --ignore-file value            è®¾ç½®å¿½ç•¥æ–‡ä»¶, eg: demo.md
   - --ignore-path value            è®¾ç½®å¿½ç•¥æ–‡ä»¶å¤¹, eg: demo
   - -h                             æŸ¥çœ‹ç‰ˆæœ¬


### è¿è¡Œå‚æ•°
> æ”¯æŒä»é…ç½®æ–‡ä»¶è¯»å–é…ç½®é¡¹ï¼Œä¸è¿‡è¿è¡Œæ—¶æŒ‡å®šå‚æ•°ä¼˜å…ˆäºé…ç½®æ–‡ä»¶ï¼Œé…ç½®å†…å®¹å‚è€ƒ `config/config.yml.tmp`

### é…ç½®æ–‡ä»¶

1. æ–°å»ºé…ç½®æ–‡ä»¶ `config/config.yml`

2. å¯åŠ¨æ—¶åŠ è½½é…ç½®æ–‡ä»¶
- äºŒè¿›åˆ¶æ–‡ä»¶
```
./markdown-blog web --config ./config/config.yml
```

- Docker
```
docker run -dit --rm --name=markdown-blog \
-p 5006:5006 \
-v $(pwd)/md:/md -v $(pwd)/cache:/cache -v $(pwd)/config:/config \
willgao/markdown-blog:latest --config ./config/config.yml
```

### é»˜è®¤é¦–é¡µ
> å¦‚æœå¯åŠ¨æ—¶æœªæŒ‡å®š `index`ï¼Œç¨‹åºé»˜è®¤ä»¥å¯¼èˆªä¸­çš„ç¬¬ä¸€ä¸ªæ–‡ä»¶ä½œä¸ºé¦–é¡µ

### è¯„è®ºæ’ä»¶
> è¯„è®ºæ’ä»¶ä½¿ç”¨çš„æ˜¯ **Gitalk**ï¼Œåœ¨ä½¿ç”¨å‰è¯·é˜…è¯»æ’ä»¶ä½¿ç”¨è¯´æ˜ [English](https://github.com/gitalk/gitalk/blob/master/readme.md) | [ä¸­æ–‡](https://github.com/gitalk/gitalk/blob/master/readme-cn.md)

#### æ–°å¢ `gitalk` é…ç½®é¡¹ï¼Œå¯åŠ¨æ—¶åŠ è½½é…ç½®æ–‡ä»¶å³å¯

```yaml
gitalk:
    client-id: "ä½ çš„ github oauth app client-idï¼Œå¿…å¡«ã€‚ å¦‚: ad549a9d085d7f5736d3"
    client-secret: "ä½ çš„ github oauth app client-secretï¼Œå¿…å¡«ã€‚ å¦‚: 510d1a6bb875fd5031f0d613cd606b1d"
    repo: "ä½ å‡†å¤‡ç”¨äºè¯„è®ºçš„é¡¹ç›®åç§°ï¼Œå¿…å¡«ã€‚ å¦‚: blog-issue"
    owner: "ä½ çš„Githubè´¦å·ï¼Œå¿…å¡«ã€‚"
    admin:
        - "ä½ çš„Githubè´¦å·"
    labels:
        - "è‡ªå®šä¹‰issueæ ‡ç­¾ï¼Œå¦‚: gitalk"
```

### åˆ†æç»Ÿè®¡å™¨
#### ç™¾åº¦
##### 1. è®¿é—® https://tongji.baidu.com åˆ›å»ºç«™ç‚¹ï¼Œè·å–å®˜æ–¹ä»£ç ä¸­çš„å‚æ•° `0952befd5b7da358ad12fae3437515b1`
```html
<script>
	var _hmt = _hmt || [];
	(function() {
	  var hm = document.createElement("script");
	  hm.src = "https://hm.baidu.com/hm.js?0952befd5b7da358ad12fae3437515b1";
	  var s = document.getElementsByTagName("script")[0];
	  s.parentNode.insertBefore(hm, s);
	})();
</script>
```
##### 2. é…ç½®
```shell
./markdown-blog web --analyzer-baidu 0952befd5b7da358ad12fae3437515b1
```

#### è°·æ­Œ
##### 1. è®¿é—® https://analytics.google.com åˆ›å»ºç«™ç‚¹ï¼Œè·å–å®˜æ–¹ä»£ç ä¸­çš„å‚æ•° `G-MYSMYSMYS`
```html
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-MYSMYSMYS"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-MYSMYSMYS');
</script>
```
##### 2. é…ç½®
```shell
./markdown-blog web --analyzer-google G-MYSMYSMYS
```

### æ ‡é¢˜æ å›¾æ ‡
> é»˜è®¤è¯»å–ä¸ç¨‹åºè¿è¡ŒåŒä¸€çº§ç›®å½•çš„ **favicon.ico** æ–‡ä»¶

### å¯¼èˆªæ’åº
> åšå®¢å¯¼èˆªé»˜è®¤æŒ‰ç…§ `å­—å…¸` æ’åºï¼Œå¯ä»¥é€šè¿‡ `@` å‰é¢çš„æ•°å­—æ¥è‡ªå®šä¹‰é¡ºåº

#### ä¸ªäººåšå®¢ç›®å½•å¦‚ä¸‹å›¾
<img width="390" alt="image" src="https://user-images.githubusercontent.com/10205742/176992908-affe01b6-0a50-488b-bb67-216a75f2a02c.png">

#### åšå®¢å¯¼èˆªå±•ç¤ºå¦‚ä¸‹å›¾
<img width="407" alt="image" src="https://user-images.githubusercontent.com/10205742/176992913-148a5ba5-bce0-42ed-b09a-9f914556723a.png">

### éƒ¨ç½²
> Nginx åå‘ä»£ç†é…ç½®æ–‡ä»¶å‚è€ƒ

#### HTTPåè®®
```
server {
    listen      80;
    listen [::]:80;
    server_name yourhost.com;

    location / {
         proxy_pass  http://127.0.0.1:5006;
         proxy_set_header   Host             $host;
         proxy_set_header   X-Real-IP        $remote_addr;
         proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;
     }
}
```
#### HTTPS åè®®ï¼ˆ80ç«¯å£è‡ªåŠ¨è·³è½¬è‡³443ï¼‰
```
server {
    listen      80;
    listen [::]:80;
    server_name yourhost.com;

    location / {
        rewrite ^ https://$host$request_uri? permanent;
    }
}

server {
    listen          443 ssl;
    server_name     yourhost.com;
    access_log      /var/log/nginx/markdown-blog.access.log main;


    #è¯ä¹¦æ–‡ä»¶åç§°
    ssl_certificate /etc/nginx/certs/yourhost.com_bundle.crt;
    #ç§é’¥æ–‡ä»¶åç§°
    ssl_certificate_key /etc/nginx/certs/yourhost.com.key;
    ssl_session_timeout 5m;
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;
    ssl_prefer_server_ciphers on;

    location / {
         proxy_pass  http://127.0.0.1:5006;
         proxy_set_header   Host             $host;
         proxy_set_header   X-Real-IP        $remote_addr;
         proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;
     }
 }
 ```

## å‡çº§
1. ä¸‹è½½æœ€æ–°ç‰ˆ [release](https://github.com/gaowei-space/markdown-blog/releases/)

2. åœæ­¢ç¨‹åºï¼Œè§£å‹æ›¿æ¢ `markdown-blog`

3. é‡æ–°å¯åŠ¨ç¨‹åº

## å¼€å‘
1. å®‰è£… `Golang` å¼€å‘ç¯å¢ƒ

2. Fork [æºç ](https://github.com/gaowei-space/gocron)

3. å¯åŠ¨ webæœåŠ¡

    è¿è¡Œä¹‹åè®¿é—®åœ°å€ [http://localhost:5006](http://localhost:5006)ï¼ŒAPIè¯·æ±‚ä¼šè½¬å‘ç»™ `markdown-blog` ç¨‹åº
    ```
    make run
    ```

4. ç¼–è¯‘

    åœ¨ **bin** ç›®å½•ç”Ÿæˆå½“å‰ç³»ç»Ÿçš„å‹ç¼©åŒ…ï¼Œå¦‚ï¼šmarkdown-blog-v1.1.0-darwin-amd64.tar
    ```
    make
    ```

5. æ‰“åŒ…

    åœ¨ **package** ç›®å½•ç”Ÿæˆå½“å‰ç³»ç»Ÿçš„å‹ç¼©åŒ…ï¼Œå¦‚ï¼šmarkdown-blog-v1.1.0-darwin-amd64.tar
    ```
    make package
    ```

6. ç”Ÿæˆ Windowsã€Linuxã€Mac çš„å‹ç¼©åŒ…

    åœ¨ **package** ç”Ÿæˆå‹ç¼©åŒ…ï¼Œå¦‚ï¼šmarkdown-blog-v1.1.0-darwin-amd64.tar markdown-blog-v1.1.0-linux-amd64.tar.gz markdown-blog-v1.1.0-windows-amd64.zip
    ```
    make package-all
    ```

## æ„è§åé¦ˆ
- åœ¨é¡¹ç›®ä¸­é‡åˆ°é—®é¢˜å¯ä»¥åœ¨ [issues](https://github.com/gaowei-space/markdown-blog/issues) ä¸­æ‰¾æ‰¾ç­”æ¡ˆæˆ–è€…ç›´æ¥æé—®
- æœ‰ä»»ä½•å»ºè®®å’Œæƒ³æ³•ï¼Œå¯ä»¥åœ¨ [discussions](https://github.com/gaowei-space/markdown-blog/discussions) ä¸­å‘èµ·è®¨è®º


## èµåŠ©å•†
- æ„Ÿè°¢ [JetBrains](https://www.jetbrains.com/?from=gaowei-space/markdown-blog) å¯¹æœ¬é¡¹ç›®çš„æ”¯æŒï¼

<a href="https://www.jetbrains.com/?from=gaowei-space/markdown-blog" target="_blank">
    <img src="https://resources.jetbrains.com/storage/products/company/brand/logos/jb_beam.png" width="100" height="100">
</a>

## æˆæƒè®¸å¯
æœ¬é¡¹ç›®é‡‡ç”¨ MIT å¼€æºæˆæƒè®¸å¯è¯ï¼Œå®Œæ•´çš„æˆæƒè¯´æ˜å·²æ”¾ç½®åœ¨ [LICENSE](https://github.com/gaowei-space/markdown-blog/blob/main/LICENSE) æ–‡ä»¶ä¸­ã€‚
